#### TO DO: 
- fix vscode extensions
- Add controls for laptop (easy monitor switching)
- modularize the config for multiple hosts/options
- automate install (maybe look into nixos anywhere)
- Configure rofi
- configure kitty
- look into tmux

#### Known issues: 
- Vscode extensions break sometimes and not enough packaged
  [Possible cause](https://github.com/catppuccin/vscode/issues/415)  
  [Alternative vscode pkgs](https://github.com/nix-community/nix-vscode-extensions/tree/master)  
  Possible fix: set mutableExtensionsDir to false  
- zen/firefox doesn't follow cursor theme

### Installation:

##### Before booting into live usb:

Fork this repo to your own public github

Change the username (replace all instances of "vova" with your own username)  \

Optional: Change the hostname, default is "desktop"

##### Booted into NixOS minimal iso (no gui live cd):  

In tty, run these commands to enter a shell with git and download the config

```
nix-shell -p git
git clone "https://github.com/<YourUsername>/<YourFork>.git"
```
Run this command to replace the hardware config file with your system info (it is autogenerated)

```
nixos-generate-config --show-hardware-config > ./<YourFork>/nixos/hardware-configuration.nix
```
Using vim or nano, delete all the file system information from ./<YourFork>/nixos/hardware-configuration.nix

```
sudo vim ./<YourFork>/nixos/hardware-configuration.nix
```

Find your desired install drive name using lsblk.  
Set that as the OS boot drive in disko.nix: line 6: device = "/dev/\<yourDrive>";

```
lsblk
sudo vim ./<YourFork>/disko.nix
```

Run disko to partition drive according the config (reminderL default hostname is "desktop")
```
sudo nix --experimental-features "nix-command flakes" run github:nix-community/disko -- --mode disko --flake ./<YourFork>#<hostname>
```
In tty install nixos according to flake (will ask you to set root password)

```
sudo nixos-install --flake ./<YourFork>#<hostname>"
```

Reboot and login to root (username is root). Then set password for your user

```
sudo passwd yourUserName
```
Congrats! You are done

### After Installation

#### Gaming setup:

Run protonup to download protonge and set that as your stream compatibility tool  
Add launch option for steam games (modify depending one game):  
```gamemoderun %command%```

#### Zen browser

For migrating profile, move your profile folder to .zen/ and make it default through zen gui.  
Alternatively, make it default by editing profiles.ini.  
Sign in to firefox sync, password manager etc.  
For theming, in config options enable toolkit.legacyUserProfileCustomizations.stylesheets.
Then in your profile foler create a chrome/ folder and add the css files (userChrome, userStyle).

#### Spotify & Flatpak
 in .profile add  
 ```export XDG_DATA_DIRS=$XDG_DATA_DIRS:/usr/share:/var/lib/flatpak/exports/share:$HOME/.local/share/flatpak/exports/share```  

Then run:  

 ```flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo```  

 ```flatpak install flathub com.spotify.Client```